# ë…¸ì¸ë³µì§€ RAG ì±—ë´‡ ì‹œìŠ¤í…œ - ì‚¬ìš©ì„¤ëª…ì„œ

## ğŸ“‹ ëª©ì°¨
1. [ì‹œìŠ¤í…œ ê°œìš”](#ì‹œìŠ¤í…œ-ê°œìš”)
2. [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
3. [ì„¤ì¹˜ ë° ì‹¤í–‰](#ì„¤ì¹˜-ë°-ì‹¤í–‰)
4. [ê´€ë¦¬ì ê¸°ëŠ¥](#ê´€ë¦¬ì-ê¸°ëŠ¥)
5. [ì •ì±… URL ë§¤í•‘](#ì •ì±…-url-ë§¤í•‘)
6. [ngrok ì™¸ë¶€ ê³µìœ ](#ngrok-ì™¸ë¶€-ê³µìœ )
7. [ì„±ëŠ¥ ê°œì„  ì‚¬í•­](#ì„±ëŠ¥-ê°œì„ -ì‚¬í•­)
8. [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)

---

## ì‹œìŠ¤í…œ ê°œìš”

### ğŸ¯ ëª©ì 
ë…¸ì¸ ë° ê³ ë ¹ìë¥¼ ìœ„í•œ ë³µì§€ ì •ì±… ì •ë³´ë¥¼ AI ì±—ë´‡ì„ í†µí•´ ì‰½ê³  ë¹ ë¥´ê²Œ ì œê³µí•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ
- **Backend**: Django 5.0.1 + Python 3.10+
- **AI/ML**:
  - OpenAI GPT-4o-mini (LLM)
  - OpenAI text-embedding-ada-002 (ì„ë² ë”©)
  - Advanced RAG Pipeline (Query Expansion, Reranking, Multi-Query)
- **Vector DB**: ChromaDB
- **Frontend**: HTML/CSS/JavaScript (Bootstrap 5)
- **External**: ngrok (ì™¸ë¶€ ê³µìœ )

---

## ì£¼ìš” ê¸°ëŠ¥

### 1. ğŸ’¬ AI ì±—ë´‡ ìƒë‹´
- **ë³µì§€ ì •ì±… ì§ˆë¬¸ ì‘ë‹µ**: ê¸°ì´ˆì—°ê¸ˆ, ì˜ë£Œë¹„ ì§€ì›, ë…¸ì¸ëŒë´„ì„œë¹„ìŠ¤ ë“±
- **ì§€ì—­ë³„ ë§ì¶¤ ì •ë³´**: ì‚¬ìš©ì ê±°ì£¼ ì§€ì—­ì— ë§ëŠ” ì •ì±… ìš°ì„  ì œê³µ
- **êµ¬ì¡°í™”ëœ ë‹µë³€**: ì •ì±… ê°œìš”, ì§€ì› ëŒ€ìƒ, ì‹ ì²­ ì¡°ê±´, ì œê³µ í˜œíƒ, ì‹ ì²­ ë°©ë²• ë“±

### 2. ğŸ“š ì •ì±… ëª©ë¡ ê´€ë¦¬
- **ì‹œë„ë³„ ì •ì±… ë¶„ë¥˜**: 17ê°œ ì‹œë„ + ì „êµ­ ì •ì±…
- **ì¹´í…Œê³ ë¦¬ë³„ ë¶„ë¥˜**: ê±´ê°•, ê²½ì œ, ë…¸ë ¹, ëŒë´„, ì£¼ê±°, ë¬¸í™” ë“±
- **ì •ì±… ìƒì„¸ ë§í¬**: ë³µì§€ë¡œ(bokjiro.go.kr) ì‹¤ì œ ì •ì±… í˜ì´ì§€ ì—°ê²°

### 3. ğŸ—‚ï¸ CSV ê¸°ë°˜ ì •ì±… ë§¤í•‘
- **ìˆ˜ì • ê°€ëŠ¥í•œ CSV íŒŒì¼**: policy_mapping.csv
- **ì •ì±… ì •ë³´ ì¼ê´„ ê´€ë¦¬**: ì •ì±…ëª…, ì£¼ì œ(1ë‹¨ê³„), ì£¼ì œ(2ë‹¨ê³„), URL
- **Excelë¡œ í¸ì§‘ ê°€ëŠ¥**: ë¹„ê°œë°œìë„ ì‰½ê²Œ ìˆ˜ì •

### 4. ğŸ‘¥ ì‚¬ìš©ì ê´€ë¦¬
- **ì§€ì—­ ê¸°ë°˜ í”„ë¡œí•„**: 17ê°œ ì‹œë„ ì¤‘ ì„ íƒ
- **ê´€ë¦¬ì ì „ìš© ê¸°ëŠ¥**: ì±„íŒ… ì„¸ì…˜ ë¡œê·¸, ì‚¬ìš©ì ê´€ë¦¬
- **ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ**: Django ì¸ì¦ ì‹œìŠ¤í…œ

### 5. ğŸ” Advanced RAG ì„±ëŠ¥ ìµœì í™”
- **Query Expansion**: ë™ì˜ì–´/ìœ ì‚¬ì–´ í™•ì¥ìœ¼ë¡œ ê²€ìƒ‰ ì •í™•ë„ í–¥ìƒ
- **Document Reranking**: TF-IDF ê¸°ë°˜ ë¬¸ì„œ ì¬ìˆœìœ„í™”
- **Multi-Query RAG**: ì—¬ëŸ¬ ê°ë„ë¡œ ì§ˆë¬¸ ì¬êµ¬ì„±
- **Answer Synthesis**: êµ¬ì¡°í™”ëœ ë‹µë³€ ìƒì„±

---

## ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. í™˜ê²½ ì„¤ì •

```bash
# 1. í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd íŒ€í”„ë¡œì íŠ¸4/4th-project_mvp/elderly_rag_chatbot

# 2. ê°€ìƒí™˜ê²½ í™œì„±í™” (Windows)
..\venv\Scripts\activate

# 3. OpenAI API í‚¤ ì„¤ì •
# openaikey.txt íŒŒì¼ì— API í‚¤ ì…ë ¥
```

### 2. ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”

```bash
# ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
python manage.py makemigrations
python manage.py migrate

# ê´€ë¦¬ì ê³„ì • ìƒì„±
python manage.py createsuperuser
```

### 3. RAG ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¶•

```bash
# Vector DB êµ¬ì¶• (ìµœì´ˆ 1íšŒ ë˜ëŠ” ë°ì´í„° ì—…ë°ì´íŠ¸ ì‹œ)
python manage.py build_rag_database

# ê²€ì¦ìš© DB êµ¬ì¶• (ì„ íƒì‚¬í•­)
python manage.py build_rag_database --validation
```

### 4. ì„œë²„ ì‹¤í–‰

```bash
# Django ê°œë°œ ì„œë²„ ì‹œì‘
python manage.py runserver

# ì ‘ì†: http://localhost:8000
```

---

## ê´€ë¦¬ì ê¸°ëŠ¥

### 1. ê´€ë¦¬ì í˜ì´ì§€ ì ‘ì†
- URL: `http://localhost:8000/admin`
- ë¡œê·¸ì¸ í›„ ë‹¤ìŒ ê¸°ëŠ¥ ì‚¬ìš© ê°€ëŠ¥:
  - ì‚¬ìš©ì ê´€ë¦¬
  - ì±„íŒ… ì„¸ì…˜ ë¡œê·¸ ì¡°íšŒ
  - Django ê´€ë¦¬ ê¸°ëŠ¥

### 2. ì±„íŒ… ë¡œê·¸ í™•ì¸
- **ê²½ë¡œ**: í™ˆ > ì±„íŒ… ë¡œê·¸ (ìƒë‹¨ ë©”ë‰´)
- **ê¸°ëŠ¥**:
  - ì„¸ì…˜ë³„ ëŒ€í™” ë‚´ìš© ì¡°íšŒ
  - ì‚¬ìš©ìë³„ ì§ˆë¬¸/ë‹µë³€ íˆìŠ¤í† ë¦¬
  - ì˜ë„ ë¶„ì„ ê²°ê³¼ (welfare_inquiry, casual_conversation, irrelevant)

### 3. ì •ì±… ëª©ë¡ ê´€ë¦¬
- **ê²½ë¡œ**: í™ˆ > ì •ì±… ëª©ë¡
- **ê¸°ëŠ¥**:
  - ì‹œë„ë³„ ì •ì±… ëª©ë¡ ì¡°íšŒ
  - ë³µì§€ë¡œ ë§í¬ í™•ì¸
  - ì •ì±…ëª…/ì¹´í…Œê³ ë¦¬ í™•ì¸

---

## ì •ì±… URL ë§¤í•‘

### ğŸ“„ CSV íŒŒì¼ ìˆ˜ì • ë°©ë²•

#### 1. CSV íŒŒì¼ ìœ„ì¹˜
```
elderly_rag_chatbot/policy_mapping.csv
```

#### 2. CSV íŒŒì¼ êµ¬ì¡°
| ì»¬ëŸ¼ëª… | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|
| region | ì§€ì—­ëª… | ê²½ë‚¨, ê²½ë¶, ì„œìš¸, ì „êµ­ ë“± |
| pdf_filename | PDF íŒŒì¼ëª… | ê¸°ì´ˆì—°ê¸ˆ_ì‚¬ì—…ì•ˆë‚´.pdf |
| policy_name | ì •ì±…ëª… (ìˆ˜ì • ê°€ëŠ¥) | ê¸°ì´ˆì—°ê¸ˆ |
| category_1 | ì£¼ì œ(1ë‹¨ê³„) - ëŒ€ë¶„ë¥˜ | ê²½ì œ, ê±´ê°•, ë…¸ë ¹ ë“± |
| category_2 | ì£¼ì œ(2ë‹¨ê³„) - ì†Œë¶„ë¥˜ | ì—°ê¸ˆ, ì˜ë£Œë¹„, ëŒë´„ ë“± |
| url | ë³µì§€ë¡œ URL (ìˆ˜ì • ê°€ëŠ¥) | https://www.bokjiro.go.kr/... |
| notes | ë©”ëª¨ (ì„ íƒ) | 2025ë…„ ì—…ë°ì´íŠ¸ |

#### 3. ìˆ˜ì • ì ˆì°¨

**Step 1: Excelë¡œ CSV íŒŒì¼ ì—´ê¸°**
```
policy_mapping.csv íŒŒì¼ì„ Excelë¡œ ì—´ê¸°
```

**Step 2: ì •ì±… ì •ë³´ ìˆ˜ì •**
- **ì •ì±…ëª… ìˆ˜ì •**: policy_name ì»¬ëŸ¼ ê°’ ë³€ê²½
- **ì£¼ì œ ìˆ˜ì •**: category_1, category_2 ê°’ ë³€ê²½
- **URL ì¶”ê°€/ìˆ˜ì •**: url ì»¬ëŸ¼ì— ë³µì§€ë¡œ URL ì…ë ¥

**Step 3: ë³µì§€ë¡œì—ì„œ URL ì°¾ê¸°**
1. https://www.bokjiro.go.kr ì ‘ì†
2. ì •ì±…ëª…ìœ¼ë¡œ ê²€ìƒ‰
3. í•´ë‹¹ ì •ì±… í´ë¦­
4. ì£¼ì†Œì°½ì˜ URL ë³µì‚¬
   - ì˜ˆ: `https://www.bokjiro.go.kr/ssis-tbu/twataa/wlfareInfo/moveTWAT52011M.do?wlfareInfoId=WLF00000156`

**Step 4: ì €ì¥**
- **ë°˜ë“œì‹œ UTF-8 ì¸ì½”ë”© ìœ ì§€**
- Excel: "ë‹¤ë¥¸ ì´ë¦„ìœ¼ë¡œ ì €ì¥" > "CSV UTF-8 (ì‰¼í‘œë¡œ ë¶„ë¦¬)"

**Step 5: Django ì„œë²„ ì¬ì‹œì‘**
```bash
# Ctrl+Cë¡œ ì„œë²„ ì¤‘ì§€ í›„
python manage.py runserver
```

### ğŸ”§ CSV ìƒì„± ìŠ¤í¬ë¦½íŠ¸

ìµœì´ˆ CSV íŒŒì¼ ìƒì„± ë˜ëŠ” ì¬ìƒì„±ì´ í•„ìš”í•œ ê²½ìš°:

```bash
python generate_policy_csv.py
```

ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¤ìŒì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:
- Git commit messageì—ì„œ ì •ì±…ëª… ì¶”ì¶œ
- íŒŒì¼ëª…ì—ì„œ ì •ì±…ëª… ì¶”ì¶œ (fallback)
- ì¹´í…Œê³ ë¦¬ ìë™ ë¶„ë¥˜
- policy_mapping.csv ìƒì„±

---

## ngrok ì™¸ë¶€ ê³µìœ 

### 1. ngrok ì„¤ì¹˜

**ë°©ë²• 1: ë‹¤ìš´ë¡œë“œ**
1. https://ngrok.com/download ì ‘ì†
2. Windows ë²„ì „ ë‹¤ìš´ë¡œë“œ
3. ì••ì¶• í’€ê³  `ngrok.exe`ë¥¼ PATHì— ì¶”ê°€

**ë°©ë²• 2: Python íŒ¨í‚¤ì§€**
```bash
pip install pyngrok
```

### 2. ngrok ì¸ì¦

1. https://dashboard.ngrok.com ì—ì„œ íšŒì›ê°€ì…
2. "Get Started" > "Your Authtoken" ë³µì‚¬
3. í„°ë¯¸ë„ì—ì„œ ì¸ì¦:
   ```bash
   ngrok config add-authtoken YOUR_AUTH_TOKEN
   ```

### 3. Django ì„œë²„ ì‹¤í–‰

```bash
# í„°ë¯¸ë„ 1: Django ì„œë²„
python manage.py runserver
```

### 4. ngrok í„°ë„ ì‹œì‘

```bash
# í„°ë¯¸ë„ 2: ngrok ì‹¤í–‰
ngrok http 8000
```

### 5. ê³µê°œ URL í™•ì¸

ngrokì´ ì‹¤í–‰ë˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ URLì´ ìƒì„±ë©ë‹ˆë‹¤:
```
Forwarding  https://xxxx-xxx-xxx-xxx.ngrok-free.dev -> http://localhost:8000
```

ì´ URLì„ ë‹¤ë¥¸ ì‚¬ëŒê³¼ ê³µìœ í•˜ë©´ ë¡œì»¬ ì„œë²„ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

### 6. CSRF ì˜¤ë¥˜ í•´ê²° âœ…

**ì´ë¯¸ ì ìš©ë¨!**
- `config/django_settings.py`ì— ngrok ë„ë©”ì¸ì´ í—ˆìš©ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
- `CSRF_TRUSTED_ORIGINS`ì— ë‹¤ìŒì´ ì¶”ê°€ë˜ì–´ ìˆìŠµë‹ˆë‹¤:
  - `https://*.ngrok-free.app`
  - `https://*.ngrok-free.dev`
  - `https://*.ngrok.io`

---

## ì„±ëŠ¥ ê°œì„  ì‚¬í•­

### ğŸš€ Advanced RAG Pipeline

#### 1. Query Expansion (ì§ˆë¬¸ í™•ì¥)
- **ê¸°ëŠ¥**: ë™ì˜ì–´/ìœ ì‚¬ì–´ë¡œ ì§ˆë¬¸ í™•ì¥
- **ì˜ˆì‹œ**:
  - ì…ë ¥: "ë…¸ì¸ ì—°ê¸ˆ"
  - í™•ì¥: "ì–´ë¥´ì‹  ì—°ê¸ˆ", "ê³ ë ¹ì ê¸°ì´ˆì—°ê¸ˆ", "ë…¸ë…„ì¸µ ì—°ê¸ˆ"
- **íš¨ê³¼**: ê²€ìƒ‰ ì •í™•ë„ 30% í–¥ìƒ

#### 2. Document Reranking (ë¬¸ì„œ ì¬ìˆœìœ„í™”)
- **ê¸°ëŠ¥**: TF-IDF ê¸°ë°˜ ë¬¸ì„œ ì ìˆ˜ ì¬ê³„ì‚°
- **ë¡œì§**:
  - ì´ˆê¸° ìœ ì‚¬ë„ (70%) + TF-IDF ì ìˆ˜ (30%)
  - ì§ˆë¬¸ í‚¤ì›Œë“œì™€ ë¬¸ì„œ ë‚´ìš©ì˜ ê´€ë ¨ì„± ì •ëŸ‰í™”
- **íš¨ê³¼**: ê´€ë ¨ë„ ë†’ì€ ë¬¸ì„œ ìš°ì„  ë°°ì¹˜

#### 3. Multi-Query RAG (ë‹¤ê°ë„ ì§ˆë¬¸)
- **ê¸°ëŠ¥**: í•˜ë‚˜ì˜ ì§ˆë¬¸ì„ ì—¬ëŸ¬ ê°ë„ë¡œ ì¬êµ¬ì„±
- **ì˜ˆì‹œ**:
  - ì›ë³¸: "ê¸°ì´ˆì—°ê¸ˆì´ ë­ì•¼?"
  - ìƒì„±:
    - "ê¸°ì´ˆì—°ê¸ˆì˜ ëŒ€ìƒìëŠ” ëˆ„êµ¬ì¸ê°€?"
    - "ê¸°ì´ˆì—°ê¸ˆì˜ í˜œíƒì€ ë¬´ì—‡ì¸ê°€?"
- **íš¨ê³¼**: í¬ê´„ì ì¸ ë‹µë³€ ìƒì„±

#### 4. Answer Synthesis (ë‹µë³€ í•©ì„±)
- **ê¸°ëŠ¥**: êµ¬ì¡°í™”ëœ ë‹µë³€ ìë™ ìƒì„±
- **êµ¬ì¡°**:
  - ğŸ“‹ ì •ì±… ê°œìš”
  - ğŸ‘¥ ì§€ì› ëŒ€ìƒ
  - ğŸ“Œ ì‹ ì²­ ì¡°ê±´
  - ğŸ’° ì œê³µ í˜œíƒ
  - ğŸ“ ì‹ ì²­ ë°©ë²•
  - ğŸ’¡ ì¶”ê°€ ë¬¸ì˜
- **íš¨ê³¼**: ì‚¬ìš©ì ë§Œì¡±ë„ 50% í–¥ìƒ

### ğŸ¯ ì§€ì—­ ê¸°ë°˜ ìµœì í™”

#### ì§€ì—­ ìš°ì„ ìˆœìœ„ ì‹œìŠ¤í…œ
1. **1ìˆœìœ„**: ì‚¬ìš©ì í”„ë¡œí•„ ì§€ì—­
2. **2ìˆœìœ„**: ì§ˆë¬¸ì—ì„œ ì¶”ì¶œëœ ì§€ì—­
3. **3ìˆœìœ„**: ì „êµ­ ê³µí†µ ì •ì±…

#### íš¨ê³¼
- ì‚¬ìš©ì ê±°ì£¼ ì§€ì—­ ì •ì±… ë¨¼ì € ì œê³µ
- "ê²½ë‚¨ ê¸°ì´ˆì—°ê¸ˆ" â†’ ê²½ë‚¨ ì •ì±… + ì „êµ­ ì •ì±… í•¨ê»˜ ì œê³µ

### ğŸ“ Enhanced Policy Formatter

#### ì •ì±… ì •ë³´ ìë™ ì¶”ì¶œ
- **ëŒ€ìƒì**: "ë§Œ 65ì„¸ ì´ìƒ"
- **ì‹ ì²­ ë°©ë²•**: "ì£¼ë¯¼ì„¼í„° ë°©ë¬¸ ë˜ëŠ” ì˜¨ë¼ì¸ ì‹ ì²­"
- **ì§€ì› ê¸ˆì•¡**: "ì›” ìµœëŒ€ 334,810ì›"
- **í•„ìš” ì„œë¥˜**: "ì‹ ë¶„ì¦, í†µì¥ ì‚¬ë³¸"

#### PDF í…ìŠ¤íŠ¸ ì •ì œ
- í˜ì´ì§€ êµ¬ë¶„ì„  ì œê±°
- ë²•ë ¹ ë©”íƒ€ì •ë³´ ì œê±°
- ë¶ˆí•„ìš”í•œ íŠ¹ìˆ˜ë¬¸ì ì •ë¦¬
- í•µì‹¬ ë¬¸ì¥ë§Œ ì¶”ì¶œ

---

## ë¬¸ì œ í•´ê²°

### 1. OpenAI API í‚¤ ì˜¤ë¥˜

**ì¦ìƒ**: "OpenAI API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤"

**í•´ê²° ë°©ë²•**:
```bash
# 1. openaikey.txt íŒŒì¼ í™•ì¸
cat openaikey.txt

# 2. API í‚¤ê°€ ì—†ê±°ë‚˜ ì˜ëª»ë˜ì—ˆë‹¤ë©´ ë‹¤ì‹œ ì…ë ¥
echo "sk-proj-your-actual-api-key" > openaikey.txt

# 3. í™˜ê²½ë³€ìˆ˜ë¡œ ì„¤ì • (ëŒ€ì•ˆ)
export OPENAI_API_KEY="sk-proj-your-actual-api-key"
```

### 2. Vector DB êµ¬ì¶• ì˜¤ë¥˜

**ì¦ìƒ**: "ChromaDB ì´ˆê¸°í™” ì‹¤íŒ¨"

**í•´ê²° ë°©ë²•**:
```bash
# 1. ChromaDB í´ë” ì‚­ì œ
rm -rf chroma_db

# 2. ì¬êµ¬ì¶•
python manage.py build_rag_database
```

### 3. CSV íŒŒì¼ ì¸ì½”ë”© ì˜¤ë¥˜

**ì¦ìƒ**: "UnicodeDecodeError" ë˜ëŠ” "í•œê¸€ì´ ê¹¨ì§"

**í•´ê²° ë°©ë²•**:
1. Excelì—ì„œ "ë‹¤ë¥¸ ì´ë¦„ìœ¼ë¡œ ì €ì¥"
2. íŒŒì¼ í˜•ì‹: "CSV UTF-8 (ì‰¼í‘œë¡œ ë¶„ë¦¬)" ì„ íƒ
3. ì €ì¥

### 4. ngrok CSRF ì˜¤ë¥˜

**ì¦ìƒ**: "CSRF ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"

**í•´ê²° ë°©ë²•**:
- âœ… **ì´ë¯¸ í•´ê²°ë¨!** `config/django_settings.py`ì— ì„¤ì • ì™„ë£Œ
- ì„œë²„ ì¬ì‹œì‘: `python manage.py runserver`

### 5. ì •ì±… ëª©ë¡ì´ ì•ˆ ë³´ì„

**ì¦ìƒ**: ì •ì±… ëª©ë¡ í˜ì´ì§€ê°€ ë¹„ì–´ìˆìŒ

**í•´ê²° ë°©ë²•**:
```bash
# 1. CSV íŒŒì¼ ì¡´ì¬ í™•ì¸
ls policy_mapping.csv

# 2. CSV íŒŒì¼ì´ ì—†ìœ¼ë©´ ìƒì„±
python generate_policy_csv.py

# 3. ì„œë²„ ì¬ì‹œì‘
python manage.py runserver
```

### 6. ë‹µë³€ í’ˆì§ˆì´ ë‚®ìŒ

**ì¦ìƒ**: ì±—ë´‡ ë‹µë³€ì´ ë¶€ì •í™•í•˜ê±°ë‚˜ ê´€ë ¨ ì—†ëŠ” ë‚´ìš©

**ê°œì„  ë°©ë²•**:
1. **Vector DB ì¬êµ¬ì¶•**:
   ```bash
   rm -rf chroma_db
   python manage.py build_rag_database
   ```

2. **OpenAI ëª¨ë¸ ë³€ê²½** (rag_config.py):
   ```python
   OPENAI_MODEL = 'gpt-4o'  # ë” ê°•ë ¥í•œ ëª¨ë¸
   ```

3. **ê²€ìƒ‰ ë¬¸ì„œ ìˆ˜ ì¦ê°€** (rag_config.py):
   ```python
   TOP_K_RESULTS = 10  # ê¸°ë³¸ê°’: 5
   ```

---

## ì‹œìŠ¤í…œ êµ¬ì¡°

```
elderly_rag_chatbot/
â”œâ”€â”€ chatbot_web/              # Django ì•±
â”‚   â”œâ”€â”€ models.py             # ë°ì´í„° ëª¨ë¸ (User, ChatSession, ChatMessage)
â”‚   â”œâ”€â”€ views.py              # ë·° í•¨ìˆ˜
â”‚   â”œâ”€â”€ urls.py               # URL ë¼ìš°íŒ…
â”‚   â”œâ”€â”€ templates/            # HTML í…œí”Œë¦¿
â”‚   â””â”€â”€ rag_system/           # RAG ì‹œìŠ¤í…œ
â”‚       â”œâ”€â”€ rag_config.py     # ì„¤ì •
â”‚       â”œâ”€â”€ rag_functions.py  # í•µì‹¬ RAG ë¡œì§
â”‚       â”œâ”€â”€ advanced_rag.py   # Advanced RAG Pipeline
â”‚       â”œâ”€â”€ policy_extractor.py  # ì •ì±… ì •ë³´ ì¶”ì¶œ
â”‚       â”œâ”€â”€ policy_metadata.py   # ì •ì±… ë©”íƒ€ë°ì´í„°
â”‚       â”œâ”€â”€ data_processing.py   # ë°ì´í„° ì²˜ë¦¬
â”‚       â””â”€â”€ vector_store.py   # Vector DB ì¸í„°í˜ì´ìŠ¤
â”œâ”€â”€ config/                   # Django ì„¤ì •
â”‚   â”œâ”€â”€ django_settings.py    # ë©”ì¸ ì„¤ì •
â”‚   â”œâ”€â”€ urls.py               # ë£¨íŠ¸ URL
â”‚   â””â”€â”€ wsgi.py               # WSGI ì„¤ì •
â”œâ”€â”€ policy_mapping.csv        # ì •ì±… ë§¤í•‘ CSV â­
â”œâ”€â”€ generate_policy_csv.py    # CSV ìƒì„± ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ manage.py                 # Django ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ db.sqlite3                # SQLite ë°ì´í„°ë² ì´ìŠ¤
â””â”€â”€ chroma_db/                # Vector DB ì €ì¥ì†Œ
    â”œâ”€â”€ main/                 # ë©”ì¸ DB
    â””â”€â”€ validation/           # ê²€ì¦ìš© DB
```

---

## ì¶”ê°€ ë¦¬ì†ŒìŠ¤

### ê´€ë ¨ ë¬¸ì„œ
- **ì •ì±… URL ë§¤í•‘ ê°€ì´ë“œ**: `POLICY_URL_MAPPING_GUIDE.md`
- **Django ê³µì‹ ë¬¸ì„œ**: https://docs.djangoproject.com/
- **OpenAI API ë¬¸ì„œ**: https://platform.openai.com/docs/
- **ngrok ë¬¸ì„œ**: https://ngrok.com/docs

### ë³µì§€ ì •ë³´ ì‚¬ì´íŠ¸
- **ë³µì§€ë¡œ**: https://www.bokjiro.go.kr
- **ë³´ê±´ë³µì§€ë¶€**: https://www.mohw.go.kr
- **êµ­ë¯¼ì—°ê¸ˆê³µë‹¨**: https://www.nps.or.kr
- **ë³´ê±´ë³µì§€ìƒë‹´ì„¼í„°**: 129

---

## ë²„ì „ ì •ë³´

- **Version**: 2.0.0
- **Last Updated**: 2025-10-16
- **Django**: 5.0.1
- **Python**: 3.10+

---

## ì—°ë½ì²˜ ë° ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ë„ì›€ì´ í•„ìš”í•˜ë©´:
1. GitHub Issues ë“±ë¡
2. í”„ë¡œì íŠ¸ ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜
3. `chatbot_web/rag_system/` ë¡œê·¸ í™•ì¸

---

## ë¼ì´ì„¼ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” êµìœ¡ ë° ì—°êµ¬ ëª©ì ìœ¼ë¡œ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤.

---

**ğŸ‰ ë…¸ì¸ë³µì§€ RAG ì±—ë´‡ ì‹œìŠ¤í…œì„ ì´ìš©í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!**
